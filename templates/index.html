<!DOCTYPE html>
<html>
<head>
    <title>EV Charging Station Recommendation</title>
    <script>
        function getLocationAndSend() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    fetch('/recommend', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            lat: position.coords.latitude,
                            lon: position.coords.longitude
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        let result = document.getElementById("result");
                        result.innerHTML = "<h3>Top Recommended Stations:</h3>";
                        data.forEach((station, index) => {
                            result.innerHTML += `
                                <p><b>${index + 1}. ${station.name}</b><br>
                                Distance: ${station.distance} km<br>
                                Occupancy: ${station.occupancy}%<br>
                                Charging Speed: ${station.charging_speed} kW<br>
                                Price: ${station.price} PLN/kWh<br>
                                Score: ${station.score}</p>`;
                        });
                    });
                });
            } else {
                alert("Location access not available.");
            }
        }
    </script>
</head>
<body>
    <h2>EV Charging Station Recommendation App</h2>
    <button onclick="getLocationAndSend()">Use My Location & Show Nearest Stations</button>
    <div id="result"></div>
</body>
</html>
